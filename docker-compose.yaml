version: '3'
services:
    plugin:
        build: .
        environment:
        - PLUGIN_KIND=deployment
        - PLUGIN_DEPLOYMENT=subscriptions-web 
        - PLUGIN_USER=drone 
        - PLUGIN_NAMESPACE=subscriptions 
        - PLUGIN_CLUSTER=[stageblue, stagegreen]
        - PLUGIN_AUTH_MODE=client-cert 
        - PLUGIN_TAG=3381de16fddfe6b76cabdd243be01ab5d0bf9198 
        - PLUGIN_REPO=razorpay/subscriptions 
        - SERVER_URL_STAGEBLUE=https://stage-blue.k8s.razorpay.com.:443
        - SERVER_CERT_STAGEBLUE=LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURMRENDQWhTZ0F3SUJBZ0lRTkJMaVMxZ1pZMURGMHN6Z2hTc2w4ekFOQmdrcWhraUc5dzBCQVFzRkFEQXcKTVJFd0R3WURWUVFLRXdoeVlYcHZjbkJoZVRFYk1Ca0dBMVVFQXhNU2EzVmlaUzFqWVMxemRHRm5aUzFpYkhWbApNQjRYRFRFNE1EZ3lOVEUzTURZMU9Wb1hEVEU1TURneU5URTNNRFkxT1Zvd01ERVJNQThHQTFVRUNoTUljbUY2CmIzSndZWGt4R3pBWkJnTlZCQU1URW10MVltVXRZMkV0YzNSaFoyVXRZbXgxWlRDQ0FTSXdEUVlKS29aSWh2Y04KQVFFQkJRQURnZ0VQQURDQ0FRb0NnZ0VCQUt2MnFDZVZGMjc4bXRBWXA0aFNzMmJacnVMYnYzdjhBMG54bDdRUgo5Z0NZb0pmRHdRQTlzeTRDa2d1Rm1PQ2lWa1hCb3d6aFFUenJDeE80QzBGQ0xNUVMzdHZKaUdseGJCTERVNFlxCnR4QUt5UE5uaWpBWXRsMGlQckYxMkU2alNVQ0pkUzR4SE1pb2JQMDIyZjMzWTNWMUJyaFRkMVNQRmJaR1BzVGYKNHQxZDBReVJoUjV1NktZOGhscWZyRVpVTEM4ekEvdGVUaWdsQnhhZUcxUVExNjhpWlJMUFFtSDIzSEw3d0xGZgpQY2JnaTBWR2IzaVgyYXRRZVF5enhkNE1WMEFMaHRmZThRMnh0bDFmeVZveEVZNFA1ajRmdWNiUVhneWIyUGF5CjNRUU9pVjFWQlhiK2tRMTc0MFRmL3d5MG0yd1hXY3ZPM0JNdGY3NGpuMVhVRExFQ0F3RUFBYU5DTUVBd0RnWUQKVlIwUEFRSC9CQVFEQWdLa01BOEdBMVVkRXdFQi93UUZNQU1CQWY4d0hRWURWUjBPQkJZRUZLSzZEWmU1Z21zaQpjSWpZazFnL282amJuZDVhTUEwR0NTcUdTSWIzRFFFQkN3VUFBNElCQVFDT3VqYnc5NU9oZy9JWHhRNG5qUFc3CnExUFh2NDNmV1p3VndIa083THhiaUFINllpaDNkWlVUdjJZYU5WMk5JS0NaSnJUN2tzTHFVRHRHTm9lOW5BTkMKTHo4cXRJUGk5K0VXT0hldFZqUUsyWGg0UFJ3VG8waEthS1hNQmlPdlJxRDRIYjBLQU9qYW9ESVgxbWJGRm10NApPV0tmTVAzSTNneXNzSVAxQlY0YXd2VGI5REJMcFhYMmlDckRadHZCQXRUZkxKM1BJQzU2WXg4Y21nakNac3l6CjFhMFlqSjhOOFlMajhWWUtNcW80Zk10bEF0NWI0eHBtSXdCejYrUU9mUG1kRTNZSXF2Yll3ckc4ZU05aStUdXUKay92WmJPaWJxWDY3RGNXSTF5Y2F5MllSSlpFQjVWL0UyWUwza1NRRGt0eCtFZm91bThDZEZ0WWRadHZvZzZicwotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
        - CLIENT_CERT_STAGEBLUE=LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUNQRENDQVNRQ0NRREwraDMrQmlkYklqQU5CZ2txaGtpRzl3MEJBUVVGQURCbk1Ra3dCd1lEVlFRR0V3QXgKQ1RBSEJnTlZCQWdUQURFSk1BY0dBMVVFQnhNQU1Ra3dCd1lEVlFRUkV3QXhFVEFQQmdOVkJBb1RDSEpoZW05eQpjR0Y1TVFrd0J3WURWUVFMRXdBeEd6QVpCZ05WQkFNVEVtdDFZbVV0WTJFdGEzVmlaUzF6ZEdGblpUQWVGdzB4Ck9EQXhNVGN4TWpRNU1UaGFGdzB4T1RBMk1ERXhNalE1TVRoYU1DRXhEakFNQmdOVkJBTVRCV1J5YjI1bE1ROHcKRFFZRFZRUUtFd1prWlhadmNITXdYREFOQmdrcWhraUc5dzBCQVFFRkFBTkxBREJJQWtFQXhmY0lxbHBEdXo1ZQpYV0ZTU1liWHgrTHF5R1pqd0VJODQ4WFhWWnE0STZ0ZVg5RXkya2xNWU5iWU4rdWlvRDFkTG1Ud20zV21qTVl4CmpMY3RUaU1SWFFJREFRQUJNQTBHQ1NxR1NJYjNEUUVCQlFVQUE0SUJBUUJhb01hYVBFMUZySXRkWGNWc1BIVmMKYzBtSzUrZUU1dXhoc2JvUkhRaUQzT2gyMUJDNDdYdFM1TWcwMEljR1BHbS9rM25qZTZ4Rm1xVkp2alg2SDdTcgpZdTBVTlBGSVpVWXMwa3V0MXM5Ynl0b0JlOW9zVStzWlpKbU0zMjFtbGVteUhVS0RZZlFnZ29Idk9EL3hFaWFZClR3cE5Cby9HWHhvNzhmTEszcjdKcFlGSmZsTnhlK0kvMjIzRzhtOUUrQ2d2T2M3V0wvcjRIM0xEcWg3VTdQb2kKK0NOSXk2VnFFZ1Q2d2M1YjJ0Nm1lTkdxMUkvZVZsRDZsTXlhQW5CY1JBcmxubVdvODVtZzdYekdHQkRCZTNrQQo2V0pGZjVOMGFqZ2RqeVN6WmpBMjVUNU9STmNpakZZYUdlWU9abDkvaWNodUNXQ2RldFl0U0NWQzhiVWtDSURBCi0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K
        - CLIENT_KEY_STAGEBLUE=LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlCUEFJQkFBSkJBTVgzQ0twYVE3cytYbDFoVWttRzE4Zmk2c2htWThCQ1BPUEYxMVdhdUNPclhsL1JNdHBKClRHRFcyRGZyb3FBOVhTNWs4SnQxcG96R01ZeTNMVTRqRVYwQ0F3RUFBUUpCQUw5SlNzaEEzRDJyc0VjTzZSSS8KQjNZUDM4bXdsaWFLV29mRS9hT3NFczN5N05CTGREbXZaZEkyTlNWbUFqZlNKaExZdC9zU21VejAzLzFOK2ZLTApwRUVDSVFEOThYSGpacG5UbTViUjZGYkI2azdyN1Q0ZlA4cElYdDJoRGFIcjYybXErUUloQU1lUmhIRitiSTJSCkxHM0pRaUxNb2czcWxyN0hmWmFaYW5zWUpLRFlTSzZGQWlFQTZ1UUdnRjFMTkZ6YXFOYk1TUm8rWGlSWUxmZUgKV0dISGgwMWcxU1F2M2FFQ0lCN044MmVoWUJncUJIV2R6enVYNHB2TFRpRjhvWUlSaEVJajQrTi8veGdSQWlFQQp3a2o3WWN6c1IrbUVUVUsyNWtWU3ZoZkhtVUE1LzJMWUNsNTIveFoxVkxvPQotLS0tLUVORCBSU0EgUFJJVkFURSBLRVktLS0tLQo=
        - SERVER_URL_STAGEGREEN=https://stage-green.k8s.razorpay.com.:443
        - SERVER_CERT_STAGEGREEN=LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURMRENDQWhTZ0F3SUJBZ0lRTkJMaVMxZ1pZMURGMHN6Z2hTc2w4ekFOQmdrcWhraUc5dzBCQVFzRkFEQXcKTVJFd0R3WURWUVFLRXdoeVlYcHZjbkJoZVRFYk1Ca0dBMVVFQXhNU2EzVmlaUzFqWVMxemRHRm5aUzFpYkhWbApNQjRYRFRFNE1EZ3lOVEUzTURZMU9Wb1hEVEU1TURneU5URTNNRFkxT1Zvd01ERVJNQThHQTFVRUNoTUljbUY2CmIzSndZWGt4R3pBWkJnTlZCQU1URW10MVltVXRZMkV0YzNSaFoyVXRZbXgxWlRDQ0FTSXdEUVlKS29aSWh2Y04KQVFFQkJRQURnZ0VQQURDQ0FRb0NnZ0VCQUt2MnFDZVZGMjc4bXRBWXA0aFNzMmJacnVMYnYzdjhBMG54bDdRUgo5Z0NZb0pmRHdRQTlzeTRDa2d1Rm1PQ2lWa1hCb3d6aFFUenJDeE80QzBGQ0xNUVMzdHZKaUdseGJCTERVNFlxCnR4QUt5UE5uaWpBWXRsMGlQckYxMkU2alNVQ0pkUzR4SE1pb2JQMDIyZjMzWTNWMUJyaFRkMVNQRmJaR1BzVGYKNHQxZDBReVJoUjV1NktZOGhscWZyRVpVTEM4ekEvdGVUaWdsQnhhZUcxUVExNjhpWlJMUFFtSDIzSEw3d0xGZgpQY2JnaTBWR2IzaVgyYXRRZVF5enhkNE1WMEFMaHRmZThRMnh0bDFmeVZveEVZNFA1ajRmdWNiUVhneWIyUGF5CjNRUU9pVjFWQlhiK2tRMTc0MFRmL3d5MG0yd1hXY3ZPM0JNdGY3NGpuMVhVRExFQ0F3RUFBYU5DTUVBd0RnWUQKVlIwUEFRSC9CQVFEQWdLa01BOEdBMVVkRXdFQi93UUZNQU1CQWY4d0hRWURWUjBPQkJZRUZLSzZEWmU1Z21zaQpjSWpZazFnL282amJuZDVhTUEwR0NTcUdTSWIzRFFFQkN3VUFBNElCQVFDT3VqYnc5NU9oZy9JWHhRNG5qUFc3CnExUFh2NDNmV1p3VndIa083THhiaUFINllpaDNkWlVUdjJZYU5WMk5JS0NaSnJUN2tzTHFVRHRHTm9lOW5BTkMKTHo4cXRJUGk5K0VXT0hldFZqUUsyWGg0UFJ3VG8waEthS1hNQmlPdlJxRDRIYjBLQU9qYW9ESVgxbWJGRm10NApPV0tmTVAzSTNneXNzSVAxQlY0YXd2VGI5REJMcFhYMmlDckRadHZCQXRUZkxKM1BJQzU2WXg4Y21nakNac3l6CjFhMFlqSjhOOFlMajhWWUtNcW80Zk10bEF0NWI0eHBtSXdCejYrUU9mUG1kRTNZSXF2Yll3ckc4ZU05aStUdXUKay92WmJPaWJxWDY3RGNXSTF5Y2F5MllSSlpFQjVWL0UyWUwza1NRRGt0eCtFZm91bThDZEZ0WWRadHZvZzZicwotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
        - CLIENT_CERT_STAGEGREEN=LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUNQRENDQVNRQ0NRREwraDMrQmlkYklqQU5CZ2txaGtpRzl3MEJBUVVGQURCbk1Ra3dCd1lEVlFRR0V3QXgKQ1RBSEJnTlZCQWdUQURFSk1BY0dBMVVFQnhNQU1Ra3dCd1lEVlFRUkV3QXhFVEFQQmdOVkJBb1RDSEpoZW05eQpjR0Y1TVFrd0J3WURWUVFMRXdBeEd6QVpCZ05WQkFNVEVtdDFZbVV0WTJFdGEzVmlaUzF6ZEdGblpUQWVGdzB4Ck9EQXhNVGN4TWpRNU1UaGFGdzB4T1RBMk1ERXhNalE1TVRoYU1DRXhEakFNQmdOVkJBTVRCV1J5YjI1bE1ROHcKRFFZRFZRUUtFd1prWlhadmNITXdYREFOQmdrcWhraUc5dzBCQVFFRkFBTkxBREJJQWtFQXhmY0lxbHBEdXo1ZQpYV0ZTU1liWHgrTHF5R1pqd0VJODQ4WFhWWnE0STZ0ZVg5RXkya2xNWU5iWU4rdWlvRDFkTG1Ud20zV21qTVl4CmpMY3RUaU1SWFFJREFRQUJNQTBHQ1NxR1NJYjNEUUVCQlFVQUE0SUJBUUJhb01hYVBFMUZySXRkWGNWc1BIVmMKYzBtSzUrZUU1dXhoc2JvUkhRaUQzT2gyMUJDNDdYdFM1TWcwMEljR1BHbS9rM25qZTZ4Rm1xVkp2alg2SDdTcgpZdTBVTlBGSVpVWXMwa3V0MXM5Ynl0b0JlOW9zVStzWlpKbU0zMjFtbGVteUhVS0RZZlFnZ29Idk9EL3hFaWFZClR3cE5Cby9HWHhvNzhmTEszcjdKcFlGSmZsTnhlK0kvMjIzRzhtOUUrQ2d2T2M3V0wvcjRIM0xEcWg3VTdQb2kKK0NOSXk2VnFFZ1Q2d2M1YjJ0Nm1lTkdxMUkvZVZsRDZsTXlhQW5CY1JBcmxubVdvODVtZzdYekdHQkRCZTNrQQo2V0pGZjVOMGFqZ2RqeVN6WmpBMjVUNU9STmNpakZZYUdlWU9abDkvaWNodUNXQ2RldFl0U0NWQzhiVWtDSURBCi0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K
        - CLIENT_KEY_STAGEGREEN=LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlCUEFJQkFBSkJBTVgzQ0twYVE3cytYbDFoVWttRzE4Zmk2c2htWThCQ1BPUEYxMVdhdUNPclhsL1JNdHBKClRHRFcyRGZyb3FBOVhTNWs4SnQxcG96R01ZeTNMVTRqRVYwQ0F3RUFBUUpCQUw5SlNzaEEzRDJyc0VjTzZSSS8KQjNZUDM4bXdsaWFLV29mRS9hT3NFczN5N05CTGREbXZaZEkyTlNWbUFqZlNKaExZdC9zU21VejAzLzFOK2ZLTApwRUVDSVFEOThYSGpacG5UbTViUjZGYkI2azdyN1Q0ZlA4cElYdDJoRGFIcjYybXErUUloQU1lUmhIRitiSTJSCkxHM0pRaUxNb2czcWxyN0hmWmFaYW5zWUpLRFlTSzZGQWlFQTZ1UUdnRjFMTkZ6YXFOYk1TUm8rWGlSWUxmZUgKV0dISGgwMWcxU1F2M2FFQ0lCN044MmVoWUJncUJIV2R6enVYNHB2TFRpRjhvWUlSaEVJajQrTi8veGdSQWlFQQp3a2o3WWN6c1IrbUVUVUsyNWtWU3ZoZkhtVUE1LzJMWUNsNTIveFoxVkxvPQotLS0tLUVORCBSU0EgUFJJVkFURSBLRVktLS0tLQo=
        - DRONE_COMMIT_SHA=30e17f8d68f22aa834838fcfb1d58e7fdcdd09df